!function(){"use strict";window.textures=PIXI.loader.resources,window.Sprite=PIXI.Sprite,window.constants={worldWidth:1920,worldHeight:1080,debug:!1},window.constants.worldWidthCenter=window.constants.worldWidth/2,window.constants.worldHeightCenter=window.constants.worldHeight/2}(),function(){"use strict";window.collision={hitTestRectangle:function(e,o){var n,t,i,s,r=e.position.x+e.origin.x,a=e.position.y+e.origin.y,h=o.position.x+o.origin.x,u=o.position.y+o.origin.y;return i=r-h,s=a-u,n=e.origin.x+o.origin.x,t=e.origin.y+o.origin.y,Math.abs(i)<n&&Math.abs(s)<t}}}(),function(){"use strict";window.soundManager={sounds:{},initialize:function(){var e=[];this.sounds.themeMusic=new Howl({src:"sounds/small.mp3",loop:!0,volume:.3});for(var o=0;o<e.length;o++)this.sounds[e[o]]=new Howl({src:"sounds/"+e[o]+".mp3",volume:.6})},playSound:function(e){return"undefined"!=typeof this.sounds[e]?(this.sounds[e].play(),!0):!1}}}(),function(){"use strict";window.grove={renderer:new PIXI.autoDetectRenderer(window.worldWidth,window.worldHeight),camera:new PIXI.Container,dust:new Dust(PIXI),currentKeyboard:{},lastUpdate:0,paused:!0,world:null,menu:null,hud:null,gameOverScreen:null,startScreen:null,initialize:function(){grove.startScreen.initialize(),grove.world.initialize(),grove.hud.initialize(),grove.menu.initialize(),grove.gameOverScreen.initialize(),grove.camera.addChild(grove.world.stage),grove.camera.addChild(grove.startScreen.stage),grove.camera.addChild(grove.hud.stage),grove.camera.addChild(grove.menu.stage),grove.renderer.backgroundColor=11184810,document.body.appendChild(grove.renderer.view),grove.initialLoad(),grove.scaleCanvasToScreen(),window.addEventListener("resize",grove.scaleCanvasToScreen,!1),window.addEventListener("keydown",grove.keyDown),window.addEventListener("keyup",grove.keyUp),window.onblur=grove.lostWindowFocus,window.onfocus=grove.gainedWindowFocus},onDoneLoading:function(e,o){grove.startScreen.onDoneLoading(),grove.menu.onDoneLoading(),grove.world.onDoneLoading(),grove.hud.onDoneLoading(),grove.gameOverScreen.onDoneLoading(),grove.paused=!1,grove.loopy();var n=document.getElementById("loading-div");n.parentNode.removeChild(n)},initialLoad:function(){PIXI.loader.add("background","img/background.jpg").add("startScreen","img/start-screen.png").add("earf","img/earf.png").add("hero","img/hero.png").load(grove.onDoneLoading)},scaleCanvasToScreen:function(){var e=Math.max(document.documentElement.clientWidth,window.innerWidth||0),o=Math.max(document.documentElement.clientHeight,window.innerHeight||0),n=constants.worldHeight-o,t=constants.worldWidth-e,i=1,s=1,r=1;i=1-n/constants.worldHeight,s=1-t/constants.worldWidth,r=s>i?i:s;var a=constants.worldHeight*r,h=constants.worldWidth*r;grove.renderer.resize(h,a),grove.camera.scale.x=grove.camera.scale.y=r},keyDown:function(e){grove.currentKeyboard[e.keyCode]=!0,27===e.keyCode&&(grove.menu.isOpen?grove.menu.closeMenu:grove.menu.openMenu)(),32===e.keyCode&&grove.world.requestNewGame()},keyUp:function(e){grove.currentKeyboard[e.keyCode]=!1},lostWindowFocus:function(e){grove.currentKeyboard={},grove.world._gameOver===!1&&grove.menu.openMenu()},gainedWindowFocus:function(e){grove.world._paused&&grove.menu.isOpen===!1},loopy:function(){if(requestAnimationFrame(grove.loopy),!grove.paused){var e=Date.now(),o=e-grove.lastUpdate;grove.lastUpdate=e,o>100&&(console.log("Game loop lag: "+o),o=100),grove.dust.update(),grove.update(o),grove.drawAllTheThings(o)}},update:function(e){grove.world.update(e),grove.hud.update(e)},drawAllTheThings:function(e){grove.renderer.render(grove.camera)}}}(),function(){"use strict";grove.menu={stage:new PIXI.Container,isOpen:!1,size:{width:600,height:1920},initialize:function(){this.stage.position.x=-this.size.width,this.stage.visible=!1;var e=new PIXI.Graphics;e.beginFill(15856113),e.drawRect(0,0,this.size.width,this.size.height),e.endFill(),e.alpha=0,this.stage.addChild(e)},onDoneLoading:function(){},openMenu:function(){grove.menu.isOpen=!0,grove.menu.stage.visible=!0,tween.to(grove.menu.stage.position,.35,{x:0,ease:Power3.easeOut}),grove.hud.showPausedText(),grove.world.pauseWorld()},closeMenu:function(){tween.to(grove.menu.stage.position,.35,{x:-grove.menu.size.width,ease:Power3.easeOut,onComplete:function(){grove.menu.isOpen=!1,grove.menu.stage.visible=!1,grove.world.resumeFromPause()}}),grove.hud.hidePausedText()}}}(),function(){"use strict";grove.world={stage:new PIXI.Container,background:null,objectTemplates:{},hero:null,earf:null,obstacles:[],score:0,_paused:!0,_gameOver:!0,_resumeInProgress:!1,resumingFromPauseTimeout:null,initialize:function(){},onDoneLoading:function(){this.background=new PIXI.Sprite(textures.background.texture,1920,1080),this.stage.addChild(this.background),this.earf=new this.objectTemplates.Earf,this.stage.addChild(this.earf.graphic),this.hero=new this.objectTemplates.Hero,this.stage.addChild(this.hero.graphic),ga("send","event","welcome-to-earf","start game","fresh start")},update:function(e){this._paused||this._gameOver||(this.hero.update(e),this.earf.update(e))},pauseWorld:function(){clearTimeout(this.resumingFromPauseTimeout),grove.world._paused=!0,grove.world._resumeInProgress=!1,soundManager.sounds.themeMusic.fade(.3,.1,350),ga("send","event","welcome-to-earf","pause")},resumeFromPause:function(){this._paused===!1||this._gameOver||this._resumeInProgress||(this._resumeInProgress=!0,soundManager.sounds.themeMusic.fade(.1,.3,350),grove.hud.showAchievementText("On Your Mark",1),grove.world.resumingFromPauseTimeout=setTimeout(function(){grove.hud.showAchievementText("Get Set!",1),grove.world.resumingFromPauseTimeout=setTimeout(function(){grove.hud.showAchievementText("Go!!!",1),grove.world.resumingFromPauseTimeout=setTimeout(function(){grove.world._paused=!1,grove.world._resumeInProgress=!1,grove.world.hero.lastGoalTime=grove.lastUpdate},500)},1100)},1100),ga("send","event","welcome-to-earf","unpause"))},onGameOver:function(){this._gameOver||(this._gameOver=!0,console.log("GAME OVER"),grove.gameOverScreen.onEnter(),grove.camera.addChild(grove.gameOverScreen.stage),ga("send","event","welcome-to-earf","game over",grove.world.score),grove.gameOverScreen.submitHighScore(),tween.to(this.hero.graphic,3.5,{alpha:0}),soundManager.playSound("gameOver"))},requestNewGame:function(){this._gameOver!==!1&&(this.pauseWorld(),this.score=0,this.hero.reset(),this.earf.reset(),this._gameOver=!1,grove.startScreen.onLeave(),grove.camera.removeChild(grove.gameOverScreen.stage),grove.gameOverScreen.onLeave(),this.resumeFromPause(),ga("send","event","welcome-to-earf","start game","restart"))},addScore:function(e,o){"undefined"==typeof o&&(o=!1),"undefined"==typeof e&&(e=50),this.score+=e;var n=e;return this.score%50===0&&(n=50>n?50:n,this.score%100===0&&(n=100>n?100:n,this.score%1e3===0&&(n=1e3>n?1e3:n))),grove.hud.starExplosion(n),e}}}(),function(){"use strict";grove.hud={stage:new PIXI.Container,scoreboardPosition:{x:96,y:50},scoreText:new PIXI.Text,scoreboardBackground:null,scoreboardParticleContainer:null,scrollingCombatText:new PIXI.Text,scrollingCombatTween:null,showFPS:!0,fpsText:new PIXI.Text,framesInLastSecond:0,timeSinceFPSReset:0,achievementAnimationInProgress:!1,achievementText:new PIXI.Text,pausedText:new PIXI.Text,pausedTextTween:null,initialize:function(){constants.debug&&this.buildFPSBlock(),this.buildAchievementDisplay(),this.buildScrollingCombatDisplay(),this.buildPausedDisplay()},onDoneLoading:function(){this.buildScoreBlock()},update:function(e){constants.debug&&(this.timeSinceFPSReset+=e,this.framesInLastSecond++,this.timeSinceFPSReset>=1e3&&(this.fpsText.text="FPS: "+this.framesInLastSecond,this.framesInLastSecond=0,this.timeSinceFPSReset=0)),this.scoreText.text=String(grove.world.score)},buildScrollingCombatDisplay:function(){this.scrollingCombatText.style={fill:"#296100",fontFamily:"impact",fontSize:"100px",lineJoin:"round",stroke:"#fff",strokeThickness:10,align:"center"},this.scrollingCombatText.anchor={x:.5,y:.5},this.scrollingCombatText.alpha=0,this.stage.addChild(this.scrollingCombatText)},buildPausedDisplay:function(){this.pausedText.style={fill:"#fff",fontFamily:"impact",fontSize:"80px",lineJoin:"round",stroke:"#434343",strokeThickness:10,align:"center"},this.pausedText.text="PRESS ESC TO RESUME",this.pausedText.anchor={x:.5,y:.5},this.pausedText.position={x:960,y:920},this.pausedText.alpha=0,this.stage.addChild(this.pausedText)},buildAchievementDisplay:function(){this.achievementText.style={fill:"#fff",fontFamily:"impact",fontSize:"100px",stroke:"#434343",strokeThickness:10,lineJoin:"round",align:"center"},this.achievementText.anchor={x:.5,y:.5},this.achievementText.position.set(constants.worldWidthCenter,constants.worldHeightCenter),this.achievementText.alpha=0,this.stage.addChild(this.achievementText)},buildScoreBlock:function(){this.scoreText.style={fill:"#ffcc00",fontFamily:"impact",fontSize:"45px",stroke:"#9f882a",strokeThickness:6,lineJoin:"round",align:"center"},this.scoreText.text="0",this.scoreText.position.set(this.scoreboardPosition.x,this.scoreboardPosition.y),this.scoreText.anchor={x:.5,y:.5},this.stage.addChild(this.scoreText),this.scoreboardParticleContainer=new PIXI.particles.ParticleContainer(15e3,{alpha:!0,scale:!0,rotation:!0,uvs:!0}),this.stage.addChild(this.scoreboardParticleContainer)},buildFPSBlock:function(){var e=new PIXI.Graphics;e.beginFill(16777215,.6),e.drawRect(constants.worldWidth-260,constants.worldHeight-50,260,50),e.endFill(),this.stage.addChild(e),this.fpsText.style={fill:"black",fontFamily:"sans-serif",fontSize:"32px"},this.fpsText.position.set(constants.worldWidth-240,constants.worldHeight-41),this.stage.addChild(this.fpsText)},starExplosion:function(e){var o=32,n=64,t=.025,i=.0425,s=!1,r=.15;e>=50&&(n*=1.5,t*=.5,i*=.5,r=.09),grove.dust.create(this.scoreboardPosition.x,this.scoreboardPosition.y,function(){return new PIXI.Sprite(textures.star.texture)},this.scoreboardParticleContainer,e,r,s,0,6.28,o,n,1,2,.005,.01,t,i,.05,.1)},scrollTheCombatText:function(e,o){if(null!==this.scrollingCombatTween)for(var n=0;n<this.scrollingCombatTween.length;n++)this.scrollingCombatTween[n].kill();var t={x:o.x+constants.gridCellWidth/2,y:o.y+constants.gridCellHeight/2};this.scrollingCombatText.alpha=1,this.scrollingCombatText.scale.x=.5,this.scrollingCombatText.scale.y=.5,this.scrollingCombatText.text=e,this.scrollingCombatText.position.set(t.x,t.y),this.scrollingCombatTween=[tween.to(this.scrollingCombatText,1.6,{alpha:0,y:"-=80",ease:Power4.easeOut}),tween.to(this.scrollingCombatText.scale,1.6,{x:1,y:1,ease:Power4.easeOut})]},showPausedText:function(){tween.to(grove.hud.pausedText,.5,{alpha:1,ease:Power3.easeOut,onComplete:function(){grove.hud.pausedTextTween=tween.to(grove.hud.pausedText,1.1,{alpha:"-=0.725",repeat:-1,yoyo:!0,ease:Power1.easeOut})}})},hidePausedText:function(){grove.hud.pausedTextTween&&grove.hud.pausedTextTween.kill(),tween.to(grove.hud.pausedText,.5,{alpha:0,ease:Power3.easeOut})},showAchievementText:function(e,o){this.achievementAnimationInProgress||(this.achievementAnimationInProgress=!0,"undefined"==typeof o&&(o=1.6),this.achievementText.text=e,this.achievementText.alpha=0,this.achievementText.x=constants.worldWidthCenter-150,this.stage.addChild(this.achievementText),tween.to(this.achievementText,o,{x:"+=300",ease:Circ.easeOut,onComplete:function(){grove.hud.achievementAnimationInProgress=!1}}),tween.to(this.achievementText,o/2,{alpha:.55,onComplete:function(){this.reverse()}}))}}}(),function(){"use strict";grove.achievements={checkForGoalAchievements:function(){var e=grove.lastUpdate,o=0,n=!1;return null!==grove.world.hero.lastGoalTime&&(o=e-grove.world.hero.lastGoalTime),0===grove.world.score?(this.triggerFirstTimerAchievement(),n=!0):grove.world.hero.movesSinceLastGoal<=1?(this.triggerPreciseAchievement(),n=!0):1300>=o?(this.triggerQuickAchievement(),n=!0):1650>=o&&(this.triggerGoodAchievement(),n=!0),grove.world.hero.movesSinceLastGoal>=20&&(this.triggerLongWayAchievement(),n=!0),o>=8e3&&(this.triggerReallySlowAchievement(),n=!0),grove.world.hero.movesSinceLastGoal=0,grove.world.hero.lastGoalTime=e,n},triggerFirstTimerAchievement:function(){grove.hud.showAchievementText("D E L I C I O U S  + 2 5 0"),grove.world.addScore(250),soundManager.playSound("firstItem1C")},triggerPreciseAchievement:function(){grove.hud.showAchievementText("P R E C I S E  + 1 0 0 0"),grove.world.addScore(1e3),soundManager.playSound("preciseItem5C")},triggerQuickAchievement:function(){grove.hud.showAchievementText("Q U I C K  + 5 0 0"),grove.world.addScore(500),soundManager.playSound("powerItem3A")},triggerGoodAchievement:function(){grove.hud.showAchievementText("G O O D  + 2 0 0"),grove.world.addScore(200),soundManager.playSound("goalItem2B")},triggerLongWayAchievement:function(){grove.hud.showAchievementText("T H E  L O N G  W A Y  - 2 0"),grove.world.addScore(-20),soundManager.playSound("bummerMenu1C")},triggerReallySlowAchievement:function(){grove.hud.showAchievementText("S N A I L  - 1 0"),grove.world.addScore(-10),soundManager.playSound("bummerMenu1C")}}}(),function(){"use strict";grove.gameOverScreen={stage:new PIXI.Container,playerName:null,highScoresContainer:new PIXI.Container,highScoreTitleText:new PIXI.Text,highScoreTexts:[],highScoreData:null,highScoreFillerNames:["Anonymous Aardvark","Anonymous Albatross","Anonymous Alligator","Anonymous Alpaca","Anonymous Ant","Anonymous Anteater","Anonymous Antelope","Anonymous Ape","Anonymous Armadillo","Anonymous Baboon","Anonymous Badger","Anonymous Barracuda","Anonymous Bat","Anonymous Bear","Anonymous Beaver","Anonymous Bee","Anonymous Bison","Anonymous Boar","Anonymous Buffalo","Anonymous Butterfly","Anonymous Camel","Anonymous Cat","Anonymous Caterpillar","Anonymous Cheetah","Anonymous Chicken","Anonymous Chimpanzee","Anonymous Chinchilla","Anonymous Cobra","Anonymous Cockroach","Anonymous Coyote","Anonymous Crab","Anonymous Crocodile","Anonymous Crow","Anonymous Dog","Anonymous Dolphin","Anonymous Donkey","Anonymous Dove","Anonymous Dragonfly","Anonymous Duck","Anonymous Eagle","Anonymous Echidna","Anonymous Eel","Anonymous Elephant","Anonymous Elk","Anonymous Falcon","Anonymous Ferret","Anonymous Finch","Anonymous Fish","Anonymous Flamingo","Anonymous Fox","Anonymous Frog","Anonymous Gazelle","Anonymous Gerbil","Anonymous Giraffe","Anonymous Gnat","Anonymous Goat","Anonymous Goose","Anonymous Gorilla","Anonymous Grasshopper","Anonymous Guinea fowl","Anonymous Guinea pig","Anonymous Gull","Anonymous Hamster","Anonymous Hare","Anonymous Hawk","Anonymous Hedgehog","Anonymous Heron","Anonymous Herring","Anonymous Hippopotamus","Anonymous Hornet","Anonymous Hummingbird","Anonymous Hyena","Anonymous Jackal","Anonymous Jaguar","Anonymous Jellyfish","Anonymous Kangaroo","Anonymous Koala","Anonymous Komodo dragon","Anonymous Lark","Anonymous Lemur","Anonymous Leopard","Anonymous Lion","Anonymous Llama","Anonymous Lobster","Anonymous Mallard","Anonymous Mammoth","Anonymous Manatee","Anonymous Mink","Anonymous Mole","Anonymous Mongoose","Anonymous Monkey","Anonymous Moose","Anonymous Mouse","Anonymous Mosquito","Anonymous Narwhal","Anonymous Newt","Anonymous Nightingale","Anonymous Octopus","Anonymous Opossum","Anonymous Ostrich","Anonymous Otter","Anonymous Owl","Anonymous Panther","Anonymous Parrot","Anonymous Panda","Anonymous Pelican","Anonymous Penguin","Anonymous Pig (list)","Anonymous Pigeon","Anonymous Polar bear","Anonymous Porcupine","Anonymous Porpoise","Anonymous Prairie dog","Anonymous Quail","Anonymous Rabbit","Anonymous Raccoon","Anonymous Ram","Anonymous Raven","Anonymous Reindeer","Anonymous Rhinoceros","Anonymous Salamander","Anonymous Salmon","Anonymous Sand dollar","Anonymous Sandpiper","Anonymous Sardine","Anonymous Sea lion","Anonymous Sea urchin","Anonymous Seahorse","Anonymous Seal","Anonymous Shark","Anonymous Sheep","Anonymous Skunk","Anonymous Sloth","Anonymous Snail","Anonymous Snake","Anonymous Spider","Anonymous Squirrel","Anonymous Starling","Anonymous Stegosaurus","Anonymous Swan","Anonymous Termite","Anonymous Tiger","Anonymous Toad","Anonymous Turkey","Anonymous Turtle","Anonymous Wallaby","Anonymous Walrus","Anonymous Wasp","Anonymous Weasel","Anonymous Whale","Anonymous Wolf","Anonymous Wolverine","Anonymous Wombat","Anonymous Wren","Anonymous Yak","Anonymous Zebra"],startNewGameText:new PIXI.Text,startNewGameAnimation:null,initialize:function(){},onDoneLoading:function(){this.buildHighScoresDisplay()},update:function(e){},onEnter:function(){this.highScoresContainer.alpha=0,this.startNewGameText.alpha=1,this.startNewGameAnimation=tween.to(this.startNewGameText,1.1,{alpha:"-=0.725",repeat:-1,yoyo:!0})},onLeave:function(){this.startNewGameAnimation&&this.startNewGameAnimation.kill()},buildHighScoresDisplay:function(){this.highScoresContainer.alpha=0,this.highScoresContainer.position.set(constants.worldWidthCenter,210);var e={fill:"#fff",fontFamily:"impact",fontSize:"36px",stroke:"#434343",strokeThickness:7,lineJoin:"round"};this.startNewGameText.style=e,this.startNewGameText.style.font="52px impact",this.startNewGameText.anchor.set(.5,0),this.startNewGameText.position.set(constants.worldWidthCenter,92),this.startNewGameText.text="PRESS SPACE FOR NEW GAME",this.stage.addChild(this.startNewGameText);for(var o=0;22>o;o++){var n=new PIXI.Text;n.style=e;var t=Math.floor(o/11),i=77*o-847*t,s=-450+900*t;n.anchor.set(.5,.5),n.position.set(s,i),this.highScoresContainer.addChild(n),this.highScoreTexts.push(n)}this.stage.addChild(this.highScoresContainer)},showHighScores:function(){if(null!==this.highScoreData){this.highScoresContainer.alpha=0;var e=_.sortBy(grove.gameOverScreen.highScoreData.overall,function(e){return-e.Score}),o=_.sortBy(grove.gameOverScreen.highScoreData.today,function(e){return-e.Score}),n={fontFamily:"impact",fontSize:"26px",strokeThickness:4,stroke:"#434343",fill:"#fff"};this.highScoreTexts[0].text="TODAY",this.highScoreTexts[0].style=n,this.highScoreTexts[11].text="CHAMPIONS",this.highScoreTexts[11].style=n;for(var t,i,s,r=0;r<o.length;r++)s=o[r],s.NewlyAdded?(t="#9f882a",i="#ffcc00"):(t="#434343",i="#fff"),this.highScoreTexts[r+1].style.stroke=t,this.highScoreTexts[r+1].style.fill=i,this.highScoreTexts[r+1].text=r+1+" | "+s.Name+" | "+s.Score.toFixed(0)+"\n";for(r=0;r<e.length;r++)s=e[r],s.NewlyAdded?(t="#9f882a",i="#ffcc00"):(t="#434343",i="#fff"),this.highScoreTexts[r+12].style.stroke=t,this.highScoreTexts[r+12].style.fill=i,this.highScoreTexts[r+12].text=r+1+" | "+s.Name+" | "+s.Score.toFixed(0)+"\n";tween.to(grove.gameOverScreen.highScoresContainer,1,{alpha:1})}},submitHighScore:function(){if(null===this.playerName){var e=prompt("Please enter your nickname for high scores","");if(null===e||0===e.length){var o=Math.floor(Math.random()*this.highScoreFillerNames.length);e=this.highScoreFillerNames[o]}this.playerName=e}var n={GameId:"0",Score:grove.world.score,Name:this.playerName},t=new XMLHttpRequest;t.open("POST","http://joyfulgames.azurewebsites.net/api/HighScores",!0),t.setRequestHeader("Content-Type","application/json;charset=UTF-8"),t.send(JSON.stringify(n)),t.onload=function(){if(t.status>=200&&t.status<400){console.log("success");var e=JSON.parse(t.responseText);grove.gameOverScreen.highScoreData=e,grove.gameOverScreen.showHighScores()}else console.log("server error"),console.log(t)},t.onerror=function(){console.log("ajax error"),console.log(t)}}}}(),function(){"use strict";grove.startScreen={stage:new PIXI.Container,startNewGameAnimation:null,initialize:function(){},onDoneLoading:function(){var e=new PIXI.Sprite(textures.startScreen.texture,1251,785);e.anchor={x:.5,y:.5},e.position.set(960,540),this.stage.addChild(e);var o=new PIXI.Text;o.style={fill:"#fff",fontFamily:"impact",fontSize:"42px",lineJoin:"round",align:"center",letterSpacing:6},o.text="PRESS SPACE TO START",o.position.set(960,844),o.anchor={x:.5,y:.5},this.stage.addChild(o),this.startNewGameAnimation=tween.to(o,1.1,{alpha:"-=0.725",repeat:-1,yoyo:!0})},update:function(e){},onEnter:function(){},onLeave:function(){this.startNewGameAnimation&&this.startNewGameAnimation.kill(),tween.to(this.stage,.5,{alpha:"0",onComplete:function(){grove.camera.removeChild(this.stage)}})}}}(),function(){"use strict";grove.world.objectTemplates.Hero=function(){this.graphic=new PIXI.Sprite(textures.hero.texture);var e=360;this.position={x:window.constants.worldWidthCenter,y:e},this.graphic.anchor={x:.5,y:.5},this.graphic.width=148,this.graphic.height=100,this.graphic.position.x=this.position.x,this.graphic.position.y=this.position.y,this.graphic.alpha=0,this.radiansToGoal=0,this.updatesSinceVectorChange=0,this.currentAngle=0,this.maxRadians=2*Math.PI,this.movesSinceLastGoal=0,this.lastGoalTime=null,this.update=function(o){this.updatesSinceVectorChange++,this.timeSinceLastGoal+=o;var n=grove.currentKeyboard[38]===!0||grove.currentKeyboard[87]===!0,t=grove.currentKeyboard[40]===!0||grove.currentKeyboard[83]===!0,i=grove.currentKeyboard[37]===!0||grove.currentKeyboard[65]===!0,s=grove.currentKeyboard[39]===!0||grove.currentKeyboard[68]===!0;n||i?this.currentAngle+=-.05:(t||s)&&(this.currentAngle+=.05);var r={x:window.constants.worldWidthCenter+Math.cos(this.currentAngle)*e,y:window.constants.worldHeightCenter+Math.sin(this.currentAngle)*e},a=this.currentAngle%this.maxRadians;this.graphic.rotation=a+Math.PI/2,this.position={x:r.x,y:r.y},this.graphic.position.x=this.position.x,this.graphic.position.y=this.position.y},this.reset=function(){this.updatesSinceVectorChange=0,this.movesSinceLastGoal=0,this.lastGoalTime=null,this.update(0),tween.to(this.graphic,.8,{alpha:1})}}}(),function(){"use strict";grove.world.objectTemplates.Earf=function(){this.graphic=new PIXI.Sprite(textures.earf.texture),this.graphic.width=600,this.graphic.height=600,this.graphic.alpha=0,this.graphic.anchor={x:.5,y:.5},this.position={x:window.constants.worldWidthCenter,y:window.constants.worldHeightCenter},this.graphic.position.x=this.position.x,this.graphic.position.y=this.position.y,this.update=function(e){this.graphic.rotation+=5e-5*e},this.reset=function(){this.update(0),tween.to(this.graphic,.8,{alpha:1})}}}(),function(){"use strict";grove.world.objectTemplates.Obstacle=function(){this.tileSprite=null,this.size={width:0,height:0},this.origin={x:0,y:0},this.position={x:-5e3,y:-5e3},this.placeInWorld=function(e,o){this.size=e,this.position=o,this.tileSprite.position.x=this.position.x,this.tileSprite.position.y=this.position.y,this.origin={x:this.size.width/2,y:this.size.height/2}}}}();